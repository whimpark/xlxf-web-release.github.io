import{x as te,q as de,J as fe,b as me,aq as ve,w as W,o as pe,N as U,L as Y,W as R,M as C,ab as ye,i as J,h as $,j as O,k as V,l as H,S as k,v as o,a4 as ge,Q as S,P as X,Z as be,_ as j,T as se,r as T,n as Ce,g as he,a5 as ke,G as we,R as Ee,O as Me,aa as De,U as Ie,V as Se,a2 as Te}from"./_plugin-vue_export-helper-4889436d.js";import{aF as x,p as Be,s as K,v as le,D as Z,G as Le,C as Fe,F as Oe,a3 as _,a4 as G,aG as q,as as $e,B as Ae,aH as Pe,a as Ne,_ as ne,aI as ze,aJ as Re,q as Ye,u as He,aA as Q,aK as Ue,aL as Ve,aM as ee,aN as oe,ax as qe,O as We}from"./admin-ad3d5783.js";import{U as ae}from"./event-9519ab40.js";import{a as Xe}from"./scroll-a42079ab.js";const re=Symbol("dialogInjectionKey"),je=(e,t,u)=>{let a={offsetX:0,offsetY:0};const i=n=>{const c=n.clientX,v=n.clientY,{offsetX:m,offsetY:p}=a,s=e.value.getBoundingClientRect(),f=s.left,w=s.top,A=s.width,P=s.height,N=document.documentElement.clientWidth,B=document.documentElement.clientHeight,z=-f+m,L=-w+p,E=N-f-A+m,M=B-w-P+p,F=h=>{const l=Math.min(Math.max(m+h.clientX-c,z),E),b=Math.min(Math.max(p+h.clientY-v,L),M);a={offsetX:l,offsetY:b},e.value.style.transform=`translate(${x(l)}, ${x(b)})`},y=()=>{document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",F),document.addEventListener("mouseup",y)},d=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",i)},r=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",i)};te(()=>{de(()=>{u.value?d():r()})}),fe(()=>{r()})},xe=e=>{me(e)||Be("[useLockscreen]","You need to pass a ref param to this function");const t=K("popup"),u=ve(()=>t.bm("parent","hidden"));if(!le||Z(document.body,u.value))return;let a=0,i=!1,d="0";const r=()=>{setTimeout(()=>{Oe(document.body,u.value),i&&(document.body.style.width=d)},200)};W(e,n=>{if(!n){r();return}i=!Z(document.body,u.value),i&&(d=document.body.style.width),a=Xe(t.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,v=Le(document.body,"overflowY");a>0&&(c||v==="scroll")&&i&&(document.body.style.width=`calc(100% - ${a}px)`),Fe(document.body,u.value)}),pe(()=>r())},ue=e=>{if(!e)return{onClick:U,onMousedown:U,onMouseup:U};let t=!1,u=!1;return{onClick:r=>{t&&u&&e(r),t=u=!1},onMousedown:r=>{t=r.target===r.currentTarget},onMouseup:r=>{u=r.target===r.currentTarget}}},Ge=_({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:G([String,Array,Object])},zIndex:{type:G([String,Number])}}),Ke={click:e=>e instanceof MouseEvent};var _e=Y({name:"ElOverlay",props:Ge,emits:Ke,setup(e,{slots:t,emit:u}){const a=K("overlay"),i=c=>{u("click",c)},{onClick:d,onMousedown:r,onMouseup:n}=ue(e.customMaskEvent?void 0:i);return()=>e.mask?R("div",{class:[a.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:r,onMouseup:n},[C(t,"default")],q.STYLE|q.CLASS|q.PROPS,["onClick","onMouseup","onMousedown"]):ye("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[C(t,"default")])}});const Je=_e,ie=_({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:$e},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Ze={close:()=>!0},Qe=["aria-label"],eo=["id"],oo=Y({name:"ElDialogContent"}),to=Y({...oo,props:ie,emits:Ze,setup(e){const t=e,{t:u}=Ae(),{Close:a}=ze,{dialogRef:i,headerRef:d,bodyId:r,ns:n,style:c}=J(re),{focusTrapRef:v}=J(Pe),m=Re(v,i),p=$(()=>t.draggable);return je(i,d,p),(s,f)=>(O(),V("div",{ref:o(m),class:k([o(n).b(),o(n).is("fullscreen",s.fullscreen),o(n).is("draggable",o(p)),o(n).is("align-center",s.alignCenter),{[o(n).m("center")]:s.center},s.customClass]),style:se(o(c)),tabindex:"-1"},[H("header",{ref_key:"headerRef",ref:d,class:k(o(n).e("header"))},[C(s.$slots,"header",{},()=>[H("span",{role:"heading",class:k(o(n).e("title"))},ge(s.title),3)]),s.showClose?(O(),V("button",{key:0,"aria-label":o(u)("el.dialog.close"),class:k(o(n).e("headerbtn")),type:"button",onClick:f[0]||(f[0]=w=>s.$emit("close"))},[R(o(Ne),{class:k(o(n).e("close"))},{default:S(()=>[(O(),X(be(s.closeIcon||o(a))))]),_:1},8,["class"])],10,Qe)):j("v-if",!0)],2),H("div",{id:o(r),class:k(o(n).e("body"))},[C(s.$slots,"default")],10,eo),s.$slots.footer?(O(),V("footer",{key:0,class:k(o(n).e("footer"))},[C(s.$slots,"footer")],2)):j("v-if",!0)],6))}});var so=ne(to,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const lo=_({...ie,appendToBody:{type:Boolean,default:!1},beforeClose:{type:G(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),no={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ae]:e=>Ye(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},ao=(e,t)=>{const a=he().emit,{nextZIndex:i}=He();let d="";const r=Q(),n=Q(),c=T(!1),v=T(!1),m=T(!1),p=T(e.zIndex||i());let s,f;const w=Ue("namespace",Ve),A=$(()=>{const g={},I=`--${w.value}-dialog`;return e.fullscreen||(e.top&&(g[`${I}-margin-top`]=e.top),e.width&&(g[`${I}-width`]=x(e.width))),g}),P=$(()=>e.alignCenter?{display:"flex"}:{});function N(){a("opened")}function B(){a("closed"),a(ae,!1),e.destroyOnClose&&(m.value=!1)}function z(){a("close")}function L(){f==null||f(),s==null||s(),e.openDelay&&e.openDelay>0?{stop:s}=ee(()=>y(),e.openDelay):y()}function E(){s==null||s(),f==null||f(),e.closeDelay&&e.closeDelay>0?{stop:f}=ee(()=>h(),e.closeDelay):h()}function M(){function g(I){I||(v.value=!0,c.value=!1)}e.beforeClose?e.beforeClose(g):E()}function F(){e.closeOnClickModal&&M()}function y(){le&&(c.value=!0)}function h(){c.value=!1}function l(){a("openAutoFocus")}function b(){a("closeAutoFocus")}function D(g){var I;((I=g.detail)==null?void 0:I.focusReason)==="pointer"&&g.preventDefault()}e.lockScroll&&xe(c);function ce(){e.closeOnPressEscape&&M()}return W(()=>e.modelValue,g=>{g?(v.value=!1,L(),m.value=!0,p.value=e.zIndex?p.value++:i(),Ce(()=>{a("open"),t.value&&(t.value.scrollTop=0)})):c.value&&E()}),W(()=>e.fullscreen,g=>{t.value&&(g?(d=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=d)}),te(()=>{e.modelValue&&(c.value=!0,m.value=!0,L())}),{afterEnter:N,afterLeave:B,beforeLeave:z,handleClose:M,onModalClick:F,close:E,doClose:h,onOpenAutoFocus:l,onCloseAutoFocus:b,onCloseRequested:ce,onFocusoutPrevented:D,titleId:r,bodyId:n,closed:v,style:A,overlayDialogStyle:P,rendered:m,visible:c,zIndex:p}},ro=["aria-label","aria-labelledby","aria-describedby"],uo=Y({name:"ElDialog",inheritAttrs:!1}),io=Y({...uo,props:lo,emits:no,setup(e,{expose:t}){const u=e,a=ke();oe({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},$(()=>!!a.title)),oe({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},$(()=>!!u.customClass));const i=K("dialog"),d=T(),r=T(),n=T(),{visible:c,titleId:v,bodyId:m,style:p,overlayDialogStyle:s,rendered:f,zIndex:w,afterEnter:A,afterLeave:P,beforeLeave:N,handleClose:B,onModalClick:z,onOpenAutoFocus:L,onCloseAutoFocus:E,onCloseRequested:M,onFocusoutPrevented:F}=ao(u,d);we(re,{dialogRef:d,headerRef:r,bodyId:m,ns:i,rendered:f,style:p});const y=ue(z),h=$(()=>u.draggable&&!u.fullscreen);return t({visible:c,dialogContentRef:n}),(l,b)=>(O(),X(Te,{to:"body",disabled:!l.appendToBody},[R(Se,{name:"dialog-fade",onAfterEnter:o(A),onAfterLeave:o(P),onBeforeLeave:o(N),persisted:""},{default:S(()=>[Ee(R(o(Je),{"custom-mask-event":"",mask:l.modal,"overlay-class":l.modalClass,"z-index":o(w)},{default:S(()=>[H("div",{role:"dialog","aria-modal":"true","aria-label":l.title||void 0,"aria-labelledby":l.title?void 0:o(v),"aria-describedby":o(m),class:k(`${o(i).namespace.value}-overlay-dialog`),style:se(o(s)),onClick:b[0]||(b[0]=(...D)=>o(y).onClick&&o(y).onClick(...D)),onMousedown:b[1]||(b[1]=(...D)=>o(y).onMousedown&&o(y).onMousedown(...D)),onMouseup:b[2]||(b[2]=(...D)=>o(y).onMouseup&&o(y).onMouseup(...D))},[R(o(qe),{loop:"",trapped:o(c),"focus-start-el":"container",onFocusAfterTrapped:o(L),onFocusAfterReleased:o(E),onFocusoutPrevented:o(F),onReleaseRequested:o(M)},{default:S(()=>[o(f)?(O(),X(so,Me({key:0,ref_key:"dialogContentRef",ref:n},l.$attrs,{"custom-class":l.customClass,center:l.center,"align-center":l.alignCenter,"close-icon":l.closeIcon,draggable:o(h),fullscreen:l.fullscreen,"show-close":l.showClose,title:l.title,onClose:o(B)}),De({header:S(()=>[l.$slots.title?C(l.$slots,"title",{key:1}):C(l.$slots,"header",{key:0,close:o(B),titleId:o(v),titleClass:o(i).e("title")})]),default:S(()=>[C(l.$slots,"default")]),_:2},[l.$slots.footer?{name:"footer",fn:S(()=>[C(l.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):j("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,ro)]),_:3},8,["mask","overlay-class","z-index"]),[[Ie,o(c)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var co=ne(io,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const yo=We(co);export{Je as E,xe as a,ue as b,yo as c,je as u};
